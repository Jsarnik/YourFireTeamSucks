<div id="ActivityContainer">
	<span ng-if="ctrl.m.isLoadingCarnageReport">Loading Post Game Carnage Report...</span>

	<div class="rank-toggle-container">
		<button class="tab" ng-show="isShowRankings" ng-click="isShowRankings = false; isShowUnusedRankings = false">Hide Ranks</button>
		<button class="tab" ng-hide="isShowRankings" ng-click="isShowRankings = true; isShowUnusedRankings = false">Show Ranks</button>
	</div>
	<div class="rank-options-container" ng-show="isShowRankings">
		<div class="tabs-container">
			<button class="tab" ng-class="{'selected': !isShowUnusedRankings}" ng-click="isShowUnusedRankings = false">Used</button>
			<button class="tab" ng-class="{'selected': isShowUnusedRankings}" ng-click="isShowUnusedRankings = true">Unused</button>
		</div>
		<div class="rank-options-container bordered">
			<div class="rank-options">
				<div class="used-ranks" ng-if="!isShowUnusedRankings">
					<div class="rank-option" ng-repeat="rank in ctrl.m.rankingCategories track by $index" ng-if="rank.isUse" ng-class="{'newItem' : rank.isNew}">
						<span>{{rank.displayName}}: </span>
						<number-picker 
							values-array="ctrl.m.weightValueArray" 
							value-key="weight"
							input-model="rank">
						</number-picker>
					</div>
				</div>
				<div class="unused-ranks" ng-if="isShowUnusedRankings">
					<div class="rank-option" ng-repeat="rank in ctrl.m.rankingCategories track by $index" ng-if="!rank.isUse">
						<span>{{rank.displayName}}: </span>
						<number-picker
							on-change="ctrl.m.addNewItem"
							values-array="ctrl.m.weightValueArray" 
							value-key="weight"
							input-model="rank">
						</number-picker>
					</div>
				</div>
			</div>
		</div>
	</div>

	<button ng-click="ctrl.m.calculatePlayerStandings()">Rank</button>

	<div id="stats-table-container">
		<div id="stats-table" sticky-container is-sticky="ctrl.m.isSticky" sticky-class="stats-main-header">
			<div class="stats-main-header-container" ng-class="{'is-fixed' : ctrl.m.isSticky}">
				<div class="stats-main-header-content">
					<div class="stats-main-header">
						<div class="header-ranks">
							<span ng-repeat="rank in ctrl.m.rankingCategories track by $index" ng-if="rank.isUse">
								{{rank.displayName}} : {{rank.weight}}
							</span>
						</div>
						<div class="activity-header-content">
							<img class="activity-icon" src="http://www.bungie.net{{activityInfo.definitions.activities[0].icon}}" />
							<span class="column activity-title">{{activityInfo.definitions.activities[0].activityName}} - {{activityInfo.dateTime | date:'MM/dd/yyyy'}}</span>
							<div>
								<div class="stat-row header-row">
									<span class="column"></span>
									<span class="column header" ng-repeat="(key, val) in ctrl.m.activityMembers track by $index">	{{key}}
									</span>
								</div>
								<div class="stat-row row-rankings" ng-if="ctrl.m.isRankLoaded">
									<span class="column" class="stat-display-name">Shit Lord Rating:</span>
									<span class="column row-value-player" ng-repeat="player in ctrl.m.activityMembers track by $index">{{player.rank.totalScore}}</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="fixed-header-push" ng-if="ctrl.m.isSticky"></div>
			<div ng-class="{'odd' : $odd}" class="stat-row" ng-repeat="stat in ctrl.m.chartModel.trueStats track by $index">
				<span class="column row-title" class="stat-display-name">{{stat.displayName}}</span>
				<span ng-repeat="(key, val) in activityMembers track by $index" ng-class="{'is-greatest' : stat[key].isGreatest, 'is-least' : stat[key].isLeast, 'is-avg' : stat[key].isMostAvg}" class="column row-value-player" title="{{'(avg: ' + stat.ratingValues.avgVal + '; low: ' + stat.ratingValues.lowestVal + '; high: ' + stat.ratingValues.highestVal + ';)' }}">{{stat[key].displayValue}}</span>
			</div>
			<div ng-class="{'odd' : $odd}" class="stat-row" ng-repeat="stat in chartModel.extendedWeaponsStats track by $index">
				<span class="column row-title" class="stat-display-name">{{stat.displayName}}</span>
				<span ng-repeat="(key, val) in activityMembers track by $index" ng-class="{'is-greatest' : stat[key].isGreatest, 'is-least' : stat[key].isLeast, 'is-avg' : stat[key].isMostAvg}" class="column row-value-player" title="{{'(avg: ' + stat.ratingValues.avgVal + '; low: ' + stat.ratingValues.lowestVal + '; high: ' + stat.ratingValues.highestVal + ';)' }}">{{stat[key].displayValue}}</span>
			</div>
		</div>
	</div>
	<!--<div id="stats-table-container">
		<div>I AM A HEADER AND I STAY FIXED</div>
		<table id="stats-table">
			<thead class="stats-main-header" ng-click="ctrl.calculatePlayerStandings()">
				<tr>
					<td colspan="{{Object.keys(activityMembers).length + 1}}" class="column">Stats for (ACTIVITY NAME DATE ETC)</td>
				</tr>
			</thead>

			<tbody class="stats-table" ng-repeat="statGroup in chartModel track by $index">
				<tr class="stat-row header-row">
					<td class="column"></td>
					<td class="column header" ng-repeat="(key, val) in activityMembers track by $index">{{key}}</td>
				</tr>
				<tr ng-class="{'odd' : $odd}" class="stat-row" ng-repeat="stat in statGroup track by $index">
					<td class="column row-title" class="stat-display-name">{{stat.displayName}}</td>
					<td ng-repeat="(key, val) in activityMembers track by $index" ng-class="{'is-greatest' : stat[key].isGreatest, 'is-least' : stat[key].isLeast, 'is-avg' : stat[key].isMostAvg}" class="column row-value-player" title="{{'(avg: ' + stat.ratingValues.avgVal + '; low: ' + stat.ratingValues.lowestVal + '; high: ' + stat.ratingValues.highestVal + ';)' }}">{{stat[key].displayValue}}</td>
				</tr>
				<tr>
					<td class="column row-title" class="stat-display-name">Master ShitLord:</td>
					<td class="column" ng-repeat="player in activityMembers track by $index">{{player.rank.totalScore}}</td>
				</tr>
			</tbody>
		</table>
	</div>-->
</div>